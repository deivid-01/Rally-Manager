(this.webpackJsonpracemanager=this.webpackJsonpracemanager||[]).push([[0],{460:function(e,t,n){},646:function(e,t,n){},648:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(24),i=n.n(c),o=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,689)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))},s=n(23),l=n(94),u=n(41),d=n(8),j=n.n(d),b=n(16),p=n(13),f=n(427),h=n.n(f),O=n(152),x=n.n(O),g=n(293),m=n(361),v=n(292),y=n(667),S=n(673),w=n(671),k=n(672),C=n(670),z=n(2);function N(e){var t=e.dialogHandler,n=e.open,a=e.type,r=function(e,n){t(1==e)};return Object(z.jsxs)(y.a,{open:n,onClose:r,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(z.jsx)(C.a,{id:"alert-dialog-title",children:"Are you sure of delete this stage?"}),Object(z.jsx)(w.a,{children:Object(z.jsxs)(k.a,{id:"alert-dialog-description",children:["All results and ",a," data will be deleted."]})}),Object(z.jsxs)(S.a,{children:[Object(z.jsx)(v.a,{onClick:r.bind(this,!0),color:"secondary",children:"Agree"}),Object(z.jsx)(v.a,{onClick:r.bind(this,!1),color:"primary",autoFocus:!0,children:"Disagree"})]})]})}var A=n(674),I=n(360),T=n(685);var _=function(e){return Object(z.jsx)(T.a,Object(s.a)({elevation:6,variant:"filled"},e))};var D=function(e){var t=e.open,n=e.severity,a=e.msg,r=e.displayProgress,c=e.onAlertClose,i=e.autoHide,o=function(e,t){"clickaway"!==t&&c()};return Object(z.jsx)(A.a,{open:t,autoHideDuration:i?2e3:null,onClose:o,children:Object(z.jsxs)(_,{onClose:o,severity:n,children:[a,r&&Object(z.jsx)(I.a,{variant:"indeterminate"})]})})};var F=function(e){var t=e.type,n=e.title,r=e.id,c=e.next_URL,i=e.deleteCardHandler,o=e.fetchCardData,s=Object(a.useState)(!1),l=Object(p.a)(s,2),d=l[0],f=l[1],O=Object(a.useState)(!1),v=Object(p.a)(O,2),y=v[0],S=v[1],w=Object(u.g)(),k=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f(!1),1==t){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,i(r);case 6:S(!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.log(!1);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.localStorage.getItem("token"),e.prev=1,e.next=4,o(r);case 4:t=e.sent,A(t),I(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),A=function(e){var n=t.toLowerCase(),a=JSON.stringify(e);window.localStorage.setItem(n,a)},I=function(){w.push(c)};return Object(z.jsxs)("div",{className:"card text-center border border-dark",children:[Object(z.jsxs)("div",{className:"card-body text-dark",children:[Object(z.jsx)("h4",{className:"overflow",children:n}),Object(z.jsx)(g.a,{onClick:C,children:Object(z.jsx)(m.a,{title:"Watch ".concat(t),children:Object(z.jsx)(x.a,{style:{color:"black"}})})}),Object(z.jsx)(g.a,{onClick:function(){f(!0)},children:Object(z.jsx)(m.a,{title:"Delete ".concat(t),children:Object(z.jsx)(h.a,{style:{color:"rgba(255,0,0,0.8)"}})})})]}),Object(z.jsx)(N,{dialogHandler:k,open:d,type:t}),Object(z.jsx)(D,{open:y,severity:"success",msg:"".concat(t.toUpperCase()," Deleted"),displayProgress:!1,onAlertClose:function(){S(!1)},autoHide:!0})]})},P=n(428),R=n.n(P);n(460);var E=function(e){var t=e.data,n=e.type,a=e.next_URL,r=e.add_URL,c=e.deleteCardHandler,i=e.fetchCardData,o=Object(u.g)();return Object(z.jsx)("div",{className:"container",children:Object(z.jsxs)("div",{className:"row",children:[t.length>0&&t.map((function(e){return Object(z.jsx)("div",{className:"col-md-4",children:Object(z.jsx)(F,{type:n,title:e.title,id:e.id,next_URL:a,deleteCardHandler:c,fetchCardData:i})},e.id)})),"race"==n.toLowerCase()&&Object(z.jsx)("div",{className:"col-md-4 text-center custom-align",children:Object(z.jsx)(g.a,{onClick:function(){o.push(r)},"aria-label":"delete",className:"svg_icons",children:Object(z.jsx)(R.a,{fontSize:"large"})})})]})})},U=n(29),L=n.n(U),J="http://localhost:5000/api/races",M=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={headers:{Authorization:"Bearer ".concat(t)}},e.next=4,L.a.get(J,n);case 4:return a=e.sent,e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.get("".concat(J,"/").concat(t));case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.delete("".concat(J,"/").concat(t));case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();var W=function(e){var t=Object(a.useState)([]),n=Object(p.a)(t,2),r=n[0],c=n[1],i=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M(t);case 3:n=e.sent,c(n.map((function(e){return{id:e._id,title:e.name}}))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B(t);case 3:(n=window.localStorage.getItem("token"))&&i(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H(t);case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){var e=window.localStorage.getItem("token");i(e)}),[]),Object(z.jsxs)("div",{children:[Object(z.jsx)("br",{}),Object(z.jsxs)("div",{children:[Object(z.jsx)("h1",{className:"text-center",children:"Races"})," "]}),Object(z.jsx)("br",{}),Object(z.jsx)(E,{data:r,type:"Race",next_URL:"/race",add_URL:"/createrace",fetchCardData:s,deleteCardHandler:o})]})},V=n(26),Z=n(682);var G=n(45),X=n.n(G),$=n(438);var q=function(e){var t=e.elev,n={labels:t,datasets:[{label:"Elevation",data:t,backgroundColor:"rgb(255, 99, 132)",borderColor:"rgba(255, 99, 132, 0.2)"}]};return Object(z.jsx)("div",{className:"custom-container-80",children:Object(z.jsx)($.a,{data:n,height:300,options:{maintainAspectRatio:!1,scales:{y:{min:500.5,max:2500},x:{ticks:{autoSkip:!0,maxTicksLimit:2}}}}})})},K=[{title:"Position",field:"position",type:"numeric",width:"15%",cellStyle:{backgroundColor:"#000",color:"#FFF",textAlign:"center",fontSize:"1"},headerStyle:{backgroundColor:"#000",color:"#FFF",textAlign:"center"}},{title:"Category",field:"competitor_category",width:"15%",cellStyle:{textAlign:"center",fontSize:"1"},headerStyle:{textAlign:"center"}},{title:"Start Time",field:"start_time",width:"10%",cellStyle:{backgroundColor:"#f2b200",textAlign:"center",fontSize:"1"},headerStyle:{backgroundColor:"#f2b200",textAlign:"center",fontSize:"1"}},{title:"Arrival Time ",field:"arrival_time",width:"15%",cellStyle:{backgroundColor:"#f2b200",textAlign:"center",fontSize:"1"},headerStyle:{backgroundColor:"#f2b200",textAlign:"center",fontSize:"1"}},{title:"\xa8Partial Time",field:"partial_time",width:"15%",cellStyle:{backgroundColor:"#f2b200",textAlign:"center",fontSize:"1"},headerStyle:{backgroundColor:"#f2b200",textAlign:"center",fontSize:"1"}},{title:"Neutralization",field:"neutralization",width:"10%",cellStyle:{textAlign:"center",fontSize:"1"},headerStyle:{textAlign:"center",fontSize:"1"}},{title:"Penalization",field:"penalization",width:"10%",cellStyle:{textAlign:"center",fontSize:"1"},headerStyle:{textAlign:"center",fontSize:"1"}},{title:"TOTAL",field:"total",width:"10%",cellStyle:{backgroundColor:"#000",color:"#FFF",textAlign:"center"},headerStyle:{backgroundColor:"#000",color:"#FFF",textAlign:"center"}}];var Q=function(e){var t=e.data;return Object(z.jsx)(X.a,{columns:K,data:t,title:t.length>0?t[0].competitor_name+" "+t[0].competitor_lastname:"Competitor Name",options:{tableLayout:"fixed",search:!1,paging:!1,sorting:!1}})},Y=[{title:"Id",field:"index",editable:"never",width:"10%",cellStyle:{textAlign:"center",fontSize:"1"},headerStyle:{textAlign:"center"}},{title:"Latitude",field:"latitude",width:"15%",cellStyle:{textAlign:"center",fontSize:"1"},headerStyle:{textAlign:"center"}},{title:"Longitude",field:"longitude",width:"15%",cellStyle:{textAlign:"center",fontSize:"1"},headerStyle:{textAlign:"center"}},{title:"Radius (m)",field:"radius",width:"15%",cellStyle:{textAlign:"center",fontSize:"1"},headerStyle:{textAlign:"center"}},{title:"Penalization Time",field:"penalization",width:"10%",cellStyle:{backgroundColor:"#000",color:"#FFF",textAlign:"center"},headerStyle:{backgroundColor:"#000",color:"#FFF",textAlign:"center"}}],ee=n(679),te=n(86),ne=n(683),ae=n(423),re=function(e,t){return{lat:(e.latitude+t.latitude)/2,lng:(e.longitude+t.longitude)/2}},ce=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16;return e.flyTo([t.latitude,t.longitude],n)},ie=function(e){try{var t=e.split(":"),n=0;return 3==t.length&&t.forEach((function(e,t){n+=parseFloat(e)/Math.pow(60,t)})),n}catch(a){return 0}},oe=function(e){return e<10?"0"+String(e):String(e)},se=function(e){var t=Math.floor(e),n=60*(e-t),a=Math.floor(n),r=Math.floor(60*(n-a));return oe(t)+":"+oe(a)+":"+oe(r)},le=function(e){try{var t,n=e.split(":");if(3!=n.length)return!1;for(t=0;t<n.length;t++){if(2!=n[t].length)return!1;if(!/^\d+$/.test(parseInt(n[t])))return!1}return!0}catch(a){return!1}},ue=n(155),de=n.n(ue);var je=function(e){var t=e.data,n=e.map,a=function(){var e=0;return t.forEach((function(t){e+=ie(t.penalization)/60})),se(e)};return Object(z.jsx)(X.a,{columns:Y,data:t,title:"Waypoints missed",options:{tableLayout:"fixed",search:!1,sorting:!1},actions:[{icon:"save",tooltip:"Show in map",onClick:function(e,t){ce(n,t)}}],components:{Pagination:function(e){return Object(z.jsxs)("div",{children:[Object(z.jsxs)(ee.a,{container:!0,style:{padding:15,background:"#f5f5f5"},children:[Object(z.jsx)(ee.a,{item:!0,sm:6,align:"center",children:Object(z.jsx)(te.a,{variant:"subtitle2",children:"Total"})}),Object(z.jsx)(ee.a,{item:!0,sm:6,align:"center",children:Object(z.jsx)(te.a,{variant:"subtitle2",children:t.length>0?"+"+a():0})})]}),Object(z.jsx)(ne.a,{}),Object(z.jsx)(ae.a,Object(s.a)({},e))]})},Action:function(e){return Object(z.jsx)(g.a,{onClick:function(t){return e.action.onClick(t,e.data)},variant:"contained",style:{color:"#000"},size:"small",children:Object(z.jsx)(de.a,{fontSize:"large"})})}}})},be="http://localhost:5000/api/trackpoints",pe=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("file",n),a.append("partialresult",t),e.prev=3,e.next=6,L.a.post(be+"/file",a,{headers:{"Content-Type":"multipart/form-data"}});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t,n){return e.apply(this,arguments)}}(),fe=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.get("".concat(be,"/").concat(t));case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),he=function(e){return e.length>0?e.map((function(e,t){return{id:e._id,index:t+1,type:e.location.type,latitude:Math.round(1e4*e.location.coordinates[0])/1e4,longitude:Math.round(1e4*e.location.coordinates[1])/1e4,radius:e.rule.ratius,penalization:e.rule.penalization}})):[]},Oe=n(413),xe=n(414),ge=n(415),me=n(18),ve=n.n(me),ye=ve.a.icon({iconUrl:"../assets/icon3.svg",shadowUrl:null,shadowSize:null,shadowAnchor:null,iconSize:[45,45],className:"leaflet-venue-icon"}),Se=ve.a.icon({iconUrl:"../assets/icon2.svg",shadowUrl:null,shadowSize:null,shadowAnchor:null,iconSize:[45,45],className:"leaflet-venue-icon"}),we=ve.a.icon({iconUrl:"../assets/icon.svg",shadowUrl:null,shadowSize:null,shadowAnchor:null,iconSize:[45,45],className:"leaflet-venue-icon"}),ke=ve.a.icon({iconUrl:"../assets/flag_finish.svg",shadowUrl:null,shadowSize:null,shadowAnchor:null,iconSize:[60,60],className:"leaflet-venue-icon"}),Ce=ve.a.icon({iconUrl:"../assets/flag_start.svg",shadowUrl:null,shadowSize:null,shadowAnchor:null,iconSize:[60,60],className:"leaflet-venue-icon"}),ze=function(e){return e.points.map((function(e){return Object(z.jsxs)("div",{children:[Object(z.jsx)(Oe.a,{position:[e.latitude,e.longitude],icon:"WPM"==e.type?ye:"FZ"==e.type||"DZ"==e.type?Se:"FINISH"==e.type?ke:"START"==e.type?Ce:we,children:Object(z.jsxs)(xe.a,{children:[Object(z.jsxs)(te.a,{variant:"subtitle2",gutterBottom:!0,children:["Id: ",e.index]}),Object(z.jsxs)(te.a,{variant:"body2",gutterBottom:!0,children:["Type: ",e.type]})]})}),Object(z.jsx)(ge.a,{center:[e.latitude,e.longitude],radius:e.radius,color:"WPM"==e.type?"blue":"FZ"==e.type||"DZ"==e.type?"red":"black"})]},e.index)}))},Ne=n(244),Ae=n.n(Ne),Ie=n(416),Te=n(418),_e=n(417);var De=function(e){var t=e.mapRef,n=e.waypoints,a=e.track,r=e.zoom;return Object(z.jsxs)(Ie.a,{center:n.length>0?re(n[0],n[n.length-1]):{lat:"6.2441988",lng:"-75.6177781"},ref:t,zoom:r,children:[Object(z.jsx)(Te.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),Object(z.jsx)(Ae.a,{position:"topleft"}),Object(z.jsx)(ze,{points:n}),Object(z.jsx)(_e.a,{pathOptions:{color:"lime"},positions:a})]})},Fe=[{title:"Id",field:"id",editable:"never",width:"10%",cellStyle:{textAlign:"center",fontSize:"1"},headerStyle:{textAlign:"center"}},{title:"Average Speed",field:"averageSpeed",width:"40%",cellStyle:{textAlign:"center",fontSize:"1"},headerStyle:{textAlign:"center"}},{title:"Penalization Time",field:"penalization",width:"40%",cellStyle:{backgroundColor:"#000",color:"#FFF",textAlign:"center"},headerStyle:{backgroundColor:"#000",color:"#FFF",textAlign:"center"}}];var Pe=function(e){var t=e.data,n=e.map,a=function(){var e=0;return t.forEach((function(t){e+=ie(t.penalization)})),se(e)};return Object(z.jsx)(X.a,{columns:Fe,data:t,title:"Speed points",options:{tableLayout:"fixed",search:!1,sorting:!1},actions:[{icon:"save",tooltip:"Show in map",onClick:function(e,t){ce(n,t)}}],components:{Pagination:function(e){return Object(z.jsxs)("div",{children:[Object(z.jsxs)(ee.a,{container:!0,style:{padding:15,background:"#f5f5f5"},children:[Object(z.jsx)(ee.a,{item:!0,sm:6,align:"center",children:Object(z.jsx)(te.a,{variant:"subtitle2",children:"Total"})}),Object(z.jsx)(ee.a,{item:!0,sm:6,align:"center",children:Object(z.jsx)(te.a,{variant:"subtitle2",children:t.length>0?"+"+a():0})})]}),Object(z.jsx)(ne.a,{}),Object(z.jsx)(ae.a,Object(s.a)({},e))]})},Action:function(e){return Object(z.jsx)(g.a,{onClick:function(t){return e.action.onClick(t,e.data)},variant:"contained",style:{color:"#000"},size:"small",children:Object(z.jsx)(de.a,{fontSize:"large"})})}}})};var Re=function(e){var t=e.compInfo,n=Object(a.useRef)(),r=Object(a.useState)(null),c=Object(p.a)(r,2),i=c[0],o=c[1],s=Object(a.useState)([]),l=Object(p.a)(s,2),u=l[0],d=l[1],f=Object(a.useState)([]),h=Object(p.a)(f,2),O=h[0],x=h[1],g=Object(a.useState)([]),m=Object(p.a)(g,2),v=m[0],y=m[1],S=Object(a.useState)([]),w=Object(p.a)(S,2),k=w[0],C=w[1],N=Object(a.useState)([]),A=Object(p.a)(N,2),I=A[0],T=A[1],_=function(){var e=Object(b.a)(j.a.mark((function e(){var t,n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe(I[0].id);case 3:t=e.sent,n=[],a=[],t.forEach((function(e){n.push(e.location.coordinates),a.push(e.elevation)})),d(n),x(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){T([t]),console.log(t.waypointsMissed),y(he(t.waypointsMissed)),C(t.speedPoints),o(n.current.leafletElement)}),[]),Object(a.useEffect)((function(){I.length>0&&_()}),[I]),Object(z.jsxs)("div",{children:[Object(z.jsx)("div",{className:"custom-align",children:Object(z.jsx)("div",{className:"custom-container-80",children:Object(z.jsx)(Q,{data:I})})}),Object(z.jsx)("br",{}),Object(z.jsx)("br",{}),Object(z.jsxs)("div",{className:"custom-align",children:[Object(z.jsx)(De,{mapRef:n,zoom:10,waypoints:v,track:u}),Object(z.jsxs)("div",{className:"custom-container",children:[Object(z.jsx)("h1",{align:"center",children:"Penalization"}),Object(z.jsx)(je,{data:v.length>0?v:[],map:i}),Object(z.jsx)(Pe,{data:k.length>0?k:[],map:i})]})]}),Object(z.jsx)("br",{}),Object(z.jsx)("br",{}),Object(z.jsx)("div",{className:"custom-align",children:Object(z.jsx)(q,{elev:O})}),Object(z.jsx)("br",{}),Object(z.jsx)("br",{})]})},Ee="http://localhost:5000/api/results",Ue=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.get("".concat(Ee,"/stage/").concat(t,"/").concat(n));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),Le=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.get("".concat(Ee,"/category/").concat(t));case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Je=[{title:"Position",field:"position",width:"10%",type:"numeric",cellStyle:{backgroundColor:"#fc9003",textAlign:"center",fontSize:"1"},headerStyle:{backgroundColor:"#fc9003",textAlign:"center"}},{title:"Name",field:"competitor_name",width:"10%",cellStyle:{textAlign:"center",fontSize:"1"},headerStyle:{backgroundColor:"#fcba03",textAlign:"center"}},{title:"Lastname",field:"competitor_lastname",width:"10%",cellStyle:{textAlign:"center",fontSize:"1"},headerStyle:{backgroundColor:"#fcba03",textAlign:"center"}},{title:"Category",field:"competitor_category",width:"15%",cellStyle:{textAlign:"center",fontSize:"1"},headerStyle:{backgroundColor:"#fcba03",textAlign:"center"}},{title:"Partial Time",field:"partial_time",width:"15%",cellStyle:{textAlign:"center",fontSize:"1"},headerStyle:{backgroundColor:"#fcba03",textAlign:"center"}},{title:"Penalization",field:"penalization",width:"20%",cellStyle:{textAlign:"center",fontSize:"1"},headerStyle:{textAlign:"center"}},{title:"Total Time",field:"total",width:"20%",cellStyle:{textAlign:"center",fontSize:"1"},headerStyle:{textAlign:"center"}}],Me=function(){var e=Object(a.useState)(!1),t=Object(p.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),i=Object(p.a)(c,2),o=i[0],l=i[1],u=Object(a.useState)(!0),d=Object(p.a)(u,2),f=d[0],h=d[1],O=Object(a.useState)([]),m=Object(p.a)(O,2),v=m[0],y=m[1];var S=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ue(t,n);case 3:a=e.sent,y(a),r(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){h(!0);var e=localStorage.getItem("stage"),t=localStorage.getItem("category");e&&t&&(e=JSON.parse(e),t=JSON.parse(t),S(e._id,t.categorytype._id))}),[]),Object(z.jsx)("div",{children:f?Object(z.jsxs)("div",{className:"custom-align",children:[Object(z.jsx)("div",{className:" custom-container-80",children:Object(z.jsx)(X.a,{title:"Stage results",components:{Toolbar:function(e){return Object(z.jsx)("div",{style:{backgroundColor:"#fcba03"},children:Object(z.jsx)(G.MTableToolbar,Object(s.a)({},e))})},Action:function(e){return Object(z.jsx)(g.a,{onClick:function(t){return e.action.onClick(t,e.data)},variant:"contained",style:{color:"#000"},size:"small",children:Object(z.jsx)(x.a,{fontSize:"large"})})}},columns:Je,data:v,actions:[{icon:"save",tooltip:"Save User",onClick:function(e,t){!function(e,t){h(!f),l(t)}(0,t)}}],isLoading:!n,options:{actionsColumnIndex:-1,tableLayout:"fixed",maxBodyHeight:600,search:!1,paging:!1,filtering:!0,exportButton:!0,headerStyle:{background:"#fcba03",color:"#000",textAlign:"center",fontSize:"1"},cellStyle:{textAlign:"center",fontSize:"1"}}})}),Object(z.jsx)("br",{}),Object(z.jsx)("br",{})]}):Object(z.jsx)(Re,{compInfo:o})})};var He=function(e){var t=e.resultsBy;return Object(z.jsxs)("div",{children:[Object(z.jsx)("br",{}),Object(z.jsx)("div",{children:Object(z.jsx)(Me,{resultsBy:t})}),Object(z.jsx)("br",{}),Object(z.jsx)("br",{})]})},Be=n(37),We=n(382),Ve=n(383),Ze=n(421),Ge=n(680),Xe=n(158),$e=n.n(Xe),qe=n(277),Ke=function(e){return Object(z.jsxs)(qe.a,{display:"flex",alignItems:"center",children:[Object(z.jsx)(qe.a,{width:"100%",mr:1,children:Object(z.jsx)(I.a,Object(s.a)({variant:"determinate",color:"primary"},e))}),Object(z.jsx)(qe.a,{minWidth:35,children:Object(z.jsx)(te.a,{variant:"body2",color:"textSecondary",children:"".concat(Math.round(e.value),"%")})})]})},Qe=n(370);var Ye=function(e){var t=e.stageInfo,n=r.a.useState(),c=Object(p.a)(n,2),i=c[0],o=c[1],s=Object(a.useState)(""),l=Object(p.a)(s,2),d=l[0],f=l[1],h=Object(a.useState)(0),O=Object(p.a)(h,2),x=O[0],m=O[1],v=Object(a.useState)(!1),y=Object(p.a)(v,2),S=y[0],w=y[1],k=Object(a.useState)(null),C=Object(p.a)(k,2),N=C[0],A=C[1],I=Object(a.useState)(0),_=Object(p.a)(I,2),D=_[0],F=_[1],P=Object(a.useState)(null),R=Object(p.a)(P,2),E=R[0],U=R[1],J=Object(a.useState)("Error"),M=Object(p.a)(J,2),H=M[0],B=M[1],W=Object(a.useState)("Success"),V=Object(p.a)(W,2),Z=V[0],G=V[1],X=Object(u.g)(),$=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:clearTimeout(N),clearInterval(E),F(0),q();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.delete("http://localhost:5000/api/waypoints");case 3:t=e.sent,console.log(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(b.a)(j.a.mark((function e(n){var a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(n.name),(a=new FormData).append("file",n),a.append("stage",t.id),e.prev=4,e.next=7,L.a.post("http://localhost:5000/api/waypoints/file",a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){m(parseInt(Math.round(100*e.loaded/e.total)))}});case 7:r=e.sent,G(r.data.msg),A(setTimeout((function(){clearInterval(E),localStorage.setItem("option",2),window.location.reload(),X.replace()}),3e3)),U(setInterval((function(){F((function(e){return e>=100?100:e+1.1}))}),30)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),500==e.t0.response.status?console.log("Problem with the server"):(B(e.t0.response.data.msg),m(0),w(!0));case 16:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}(),Q=function(e){o(e)},Y=function(e){"hideError"==e?w(!1):(f(""),m(0),$())},ee=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.target.files.length>0&&(K(t.target.files[0]),t.target.value=null);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(z.jsxs)("div",{children:[Object(z.jsxs)("h1",{className:"text-center text-4xl",children:[t?t.name:"Stage name"," "]}),Object(z.jsx)("br",{}),Object(z.jsx)("div",{className:"center2",children:" Upload waypoints: "}),Object(z.jsx)("br",{}),Object(z.jsxs)("div",{className:"center messD p-24  border-2 ".concat(i?"border-green-400 bg-green-100":"border-gray-400"),onDragEnter:Q.bind(this,!0),onDragOver:function(e){e.preventDefault()},onDrop:function(e){e.preventDefault(),o(!1),e.dataTransfer.files.length>0&&(K(e.dataTransfer.files[0]),e.dataTransfer.value=null)},onDragLeave:Q.bind(this,!1),children:[Object(z.jsxs)(Ge.a,{in:0==x,children:[Object(z.jsx)("form",{children:Object(z.jsxs)("div",{children:[Object(z.jsx)("input",{id:"file-upload",type:"file",accept:".csv",style:{display:"none"},onChange:ee}),Object(z.jsx)("label",{htmlFor:"file-upload",className:"custom-file-upload",children:" Select File"})]})}),Object(z.jsx)("p",{children:"or drop .CSVs here"}),Object(z.jsx)("br",{})]}),Object(z.jsx)(Ge.a,{in:S,children:Object(z.jsx)(T.a,{severity:"error",action:Object(z.jsx)(g.a,{"aria-label":"close",color:"inherit",size:"small",onClick:Y.bind(this,"hideError"),children:Object(z.jsx)($e.a,{fontSize:"inherit"})}),children:H})}),Object(z.jsxs)(Ge.a,{in:0!=x,children:[Object(z.jsx)("p",{children:d}),Object(z.jsx)("br",{}),Object(z.jsx)(Ke,{value:x})]}),Object(z.jsx)(Ge.a,{in:100==x,children:Object(z.jsx)(T.a,{action:Object(z.jsxs)(qe.a,{position:"relative",display:"inline-flex",children:[Object(z.jsx)(Qe.a,{variant:"determinate",value:D}),Object(z.jsx)(qe.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",children:Object(z.jsx)(g.a,{"aria-label":"close",color:"inherit",size:"small",onClick:Y.bind(this," "),children:Object(z.jsx)($e.a,{fontSize:"inherit"})})})]}),children:Z})})]})]})};var et=function(e){var t=Object(a.useState)([]),n=Object(p.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)({name:"",categories:[]}),o=Object(p.a)(i,2),l=o[0],u=o[1],d=Object(a.useState)(!0),f=Object(p.a)(d,2),h=f[0],O=f[1],x=Object(a.useState)([{text:"Continue",style:"text-dark bg-warning"},{text:"Cancel",style:"text-light bg-danger"}]),g=Object(p.a)(x,2),m=g[0],y=(g[1],Object(a.useState)(null)),S=Object(p.a)(y,2),w=S[0],k=S[1],C=Object(a.useState)(0),N=Object(p.a)(C,2),A=N[0],I=N[1],T=function(){var e=window.localStorage.getItem("race");e&&(e=JSON.parse(e),F(e.categories))};Object(a.useEffect)((function(){T()}),[]),Object(a.useEffect)((function(){w&&(O(!1),I(1))}),[w]);var _=function(){u(Object(s.a)(Object(s.a)({},l),{},{categories:D()}))},D=function(){var e=r.filter((function(e){return e.active})).map((function(e){return{_id:e.id}})),t=[];return e.forEach((function(e){t.push(e._id)})),t},F=function(e){c(e.map((function(e){return{id:e._id,name:e.categorytype.name,active:!1}})))};Object(a.useEffect)((function(){l.categories.length>0&&P()}),[l]);var P=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.post("http://localhost:5000/api/stages",l);case 3:t=e.sent,n=t.data.id,k({name:l.name,id:n}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}var n}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(z.jsxs)("div",{children:[h?Object(z.jsxs)("div",{children:[Object(z.jsx)("br",{}),Object(z.jsx)("div",{className:"custom-align",children:Object(z.jsx)("input",{onChange:function(e){u(Object(s.a)(Object(s.a)({},l),{},Object(Be.a)({},e.target.name,e.target.value)))},type:"text",placeholder:"Enter stage  name",style:{outline:0},className:"text-center  big-title border-0 border-bottom",name:"name"})}),Object(z.jsx)("br",{}),Object(z.jsx)("div",{className:"custom-align",children:Object(z.jsx)("p",{children:"Select categories for this stage"})}),Object(z.jsx)("br",{}),Object(z.jsx)("div",{className:"custom-align",children:Object(z.jsx)(We.a,{row:!0,children:r.map((function(e,t){return Object(z.jsx)(Ve.a,{control:Object(z.jsx)(Ze.a,{checked:e.active,onChange:(n=t,function(e){var t=Object(V.a)(r);t[n].active=e.target.checked,c(t)}),name:e.name,color:"default"}),label:e.name},e.id);var n}))})}),Object(z.jsx)("br",{})]}):Object(z.jsx)(Ye,{stageInfo:w}),Object(z.jsx)("br",{}),Object(z.jsx)("div",{className:"custom-align",children:Object(z.jsx)(v.a,{variant:"contained",style:{textTransform:"none"},onClick:function(){1==A?(u({name:"",categories:[]}),k(null),c([]),O(!0),I(0),T()):_()},color:"primary",type:"submit",className:m[A].style,children:m[A].text})})]})},tt="http://localhost:5000/api/categories",nt=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.get("".concat(tt,"/").concat(t));case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),at=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.delete("".concat(tt,"/").concat(t));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}();var rt=function(e){var t=Object(a.useState)(),n=Object(p.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)([]),o=Object(p.a)(i,2),s=o[0],l=o[1],u=Object(a.useState)([{id:1,name:"Categories",active:!1},{id:2,name:"Create Stage",active:!1},{id:3,name:"Results",active:!1}]),d=Object(p.a)(u,2),f=d[0],h=d[1],O=Object(a.useState)({id:-1,name:"",active:!1}),x=Object(p.a)(O,2),g=x[0],m=x[1],y=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H(t);case 3:n=e.sent,console.log(n),c(n),l(n.categories.map((function(e){return{id:e._id,title:e.categorytype.name}}))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,at(t);case 3:(n=window.localStorage.getItem("race"))&&(n=JSON.parse(n),y(n._id)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,nt(t);case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){var e=window.localStorage.getItem("race");if(e){e=JSON.parse(e),y(e._id);var t=localStorage.getItem("option");m(t?f[t]:f[0]),function(){var e=Object(V.a)(f),t=localStorage.getItem("option");localStorage.removeItem("option"),e[t||0].active=!0,h(e)}()}}),[]),Object(z.jsxs)("div",{children:[Object(z.jsx)("br",{}),Object(z.jsx)("div",{children:Object(z.jsx)("h1",{className:"text-center",children:r?r.name:"Race name"})}),Object(z.jsx)("br",{}),Object(z.jsx)("div",{className:"custom-align",children:Object(z.jsx)(Z.a,{variant:"text","aria-label":"text primary button group",children:f.map((function(e){return Object(z.jsx)(v.a,{className:e.active?[e.name.localeCompare("Results")?"bg-dark text-light":"bg-red text-light"]:"",variant:e.active?"contained":"text",color:e.name.localeCompare("Results")?"default":"secondary",onClick:(t=e.id-1,function(e){var n=Object(V.a)(f);n.forEach((function(e){e.active=!1})),n[t].active=!0,m(n[t]),h(n)}),children:e.name},e.id);var t}))})}),Object(z.jsx)("br",{}),Object(z.jsx)("br",{}),1==g.id&&Object(z.jsx)(E,{data:s,type:"Category",next_URL:"/category",fetchCardData:w,deleteCardHandler:S}),2==g.id&&Object(z.jsx)(et,{}),3==g.id&&Object(z.jsx)(He,{})]})};var ct=function(e){var t=e.options,n=e.handleActiveOption;return Object(z.jsx)(Z.a,{variant:"text","aria-label":"text primary button group",children:t.map((function(e){return Object(z.jsx)(v.a,{className:e.active?[e.name.localeCompare("Results")?"bg-dark text-light":"bg-red text-light"]:"",variant:e.active?"contained":"text",color:e.name.localeCompare("Results")?"default":"secondary",onClick:n(e.id-1),children:e.name},e.id)}))})},it="http://localhost:5000/api/stages",ot=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.get("".concat(it,"/").concat(t,"/").concat(n));case 3:return a=e.sent,r=a.data,e.abrupt("return",r.partialresults);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),st=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.get("".concat(it,"/").concat(t));case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),lt=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.delete("".concat(it,"/").concat(t));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),ut=[{title:"Position",field:"position",width:"10%",type:"numeric",cellStyle:{backgroundColor:"#fc9003",textAlign:"center",fontSize:"1"},headerStyle:{backgroundColor:"#fc9003",textAlign:"center"}},{title:"Name",field:"fullName",width:"10%",cellStyle:{textAlign:"center",fontSize:"1"},headerStyle:{backgroundColor:"#fcba03",textAlign:"center"}},{title:"Number",field:"number",width:"10%",cellStyle:{textAlign:"center",fontSize:"1"},headerStyle:{backgroundColor:"#fcba03",textAlign:"center"}},{title:"Vehicle",field:"vehicle",width:"10%",cellStyle:{textAlign:"center",fontSize:"1"},headerStyle:{backgroundColor:"#fcba03",textAlign:"center"}},{title:"Total Time",field:"totalTime",width:"20%",cellStyle:{textAlign:"center",fontSize:"1"},headerStyle:{textAlign:"center"}}],dt=function(){var e=Object(a.useState)([]),t=Object(p.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),i=Object(p.a)(c,2),o=i[0],l=i[1],u=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Le(t);case 3:n=e.sent,r(d(n)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),d=function(e){var t=[];return e.forEach((function(e){e.stagesTime.forEach((function(t,n){var a="stage_".concat(n+1);e[a]=t})),delete e.stagesTime,t.push(e)})),t};return Object(a.useEffect)((function(){var e=localStorage.getItem("category");e&&(function(e){for(var t=[],n=0;n<e;n++){var a=Object(s.a)({},ut[3]);a.title="Stage ".concat(n+1),a.field="stage_".concat(n+1),t.push(a)}var r=ut.slice(0,ut.length-1),c=t,i=ut.slice(ut.length-1,ut.length);l(r.concat(c).concat(i))}((e=JSON.parse(e)).stages.length),u(e._id))}),[]),Object(z.jsxs)("div",{className:"custom-align",children:[Object(z.jsx)("div",{className:" custom-container-80",children:Object(z.jsx)(X.a,{title:"Results by category ",components:{Toolbar:function(e){return Object(z.jsx)("div",{style:{backgroundColor:"#fcba03"},children:Object(z.jsx)(G.MTableToolbar,Object(s.a)({},e))})},Action:function(e){return Object(z.jsx)(g.a,{onClick:function(t){return e.action.onClick(t,e.data)},variant:"contained",style:{color:"#000"},size:"small",children:Object(z.jsx)(x.a,{fontSize:"large"})})}},columns:o,data:n,isLoading:!1,options:{actionsColumnIndex:-1,tableLayout:"fixed",maxBodyHeight:600,search:!1,paging:!1,filtering:!0,exportButton:!0,headerStyle:{background:"#fcba03",color:"#000",textAlign:"center",fontSize:"1"},cellStyle:{textAlign:"center",fontSize:"1"}}})}),Object(z.jsx)("br",{}),Object(z.jsx)("br",{})]})};var jt=function(){var e=Object(a.useState)(),t=Object(p.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),i=Object(p.a)(c,2),o=i[0],s=i[1],l=Object(a.useState)([{id:1,name:"Stages",active:!0},{id:2,name:"Results",active:!1}]),u=Object(p.a)(l,2),d=u[0],f=u[1],h=Object(a.useState)({id:-1,name:"",active:!1}),O=Object(p.a)(h,2),x=O[0],g=O[1],m=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,lt(t);case 3:(n=window.localStorage.getItem("category"))&&(n=JSON.parse(n),y(n._id)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,st(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,nt(t);case 3:n=e.sent,s(n.stages.map((function(e){return{id:e._id,title:e.name}}))),r(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){var e=window.localStorage.getItem("category");e&&(e=JSON.parse(e),y(e._id),g(d[0]))}),[]),Object(z.jsxs)("div",{children:[Object(z.jsx)("br",{}),Object(z.jsxs)("div",{children:[Object(z.jsx)("h1",{className:"text-center",children:n?n.categorytype.name:" "})," "]}),Object(z.jsx)("br",{}),Object(z.jsx)("div",{className:"custom-align",children:Object(z.jsx)(ct,{options:d,handleActiveOption:function(e){return function(t){var n=Object(V.a)(d);n.forEach((function(e){e.active=!1})),n[e].active=!0,g(n[e]),f(n)}}})}),Object(z.jsx)("br",{}),Object(z.jsx)(Ge.a,{in:1==x.id,children:Object(z.jsx)(E,{data:o,type:"Stage",next_URL:"/stage",deleteCardHandler:m,fetchCardData:v})}),Object(z.jsx)(Ge.a,{in:2==x.id,children:Object(z.jsx)(dt,{})}),Object(z.jsx)("br",{}),Object(z.jsx)("br",{})]})},bt=n(381),pt=n(433),ft=n.n(pt);function ht(e){return Object(z.jsx)(T.a,Object(s.a)({elevation:6,variant:"filled"},e))}var Ot=function(e){var t=Object(a.useState)({username:"",password:""}),n=Object(p.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(!1),o=Object(p.a)(i,2),l=o[0],d=o[1],f=Object(u.g)(),h=function(e){c(Object(s.a)(Object(s.a)({},r),{},Object(Be.a)({},e.target.name,e.target.value)))},O=function(e,t){"clickaway"!==t&&d(!1)},x=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,m();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.push("/signup");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){window.localStorage.clear()}),[]);var m=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.post("http://localhost:5000/api/admins/login",r);case 3:t=e.sent,window.localStorage.setItem("user",JSON.stringify(t.data.admin)),window.localStorage.setItem("token",t.data.token),f.push("/races"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),d(!0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(z.jsxs)("div",{children:[Object(z.jsx)("br",{}),Object(z.jsx)("br",{}),Object(z.jsx)("br",{}),Object(z.jsx)("div",{className:"custom-align",children:Object(z.jsx)("h1",{children:"Race Manager"})}),Object(z.jsx)("div",{className:"container mt-8   custom-align",children:Object(z.jsxs)("form",{onSubmit:x,children:[Object(z.jsxs)(ee.a,{container:!0,direction:"column",justify:"center",alignItems:"flex-end",children:[Object(z.jsxs)(ee.a,{item:!0,container:!0,spacing:1,alignItems:"flex-end",children:[Object(z.jsx)(ee.a,{item:!0,children:Object(z.jsx)(ft.a,{})}),Object(z.jsx)(ee.a,{item:!0,children:Object(z.jsx)(bt.a,{id:"input-with-icon-grid",label:"Username",onChange:h,name:"username"})})]}),Object(z.jsx)(bt.a,{id:"standard-password-input",label:"Password",type:"password",name:"password",onChange:h,autoComplete:"current-password"})]}),Object(z.jsx)("br",{}),Object(z.jsx)("div",{className:"row",children:Object(z.jsx)(v.a,{variant:"contained",style:{textTransform:"none"},color:"primary",type:"submit",className:"text-dark bg-warning",children:"Log in"})})]})}),Object(z.jsx)("div",{className:"container mt-5  custom-align",children:Object(z.jsx)(v.a,{style:{textTransform:"none"},variant:"contained",onClick:g,color:"secondary",type:"submit",className:"text-light bg-dark",children:"Sign up"})}),Object(z.jsx)(A.a,{open:l,autoHideDuration:2e3,onClose:O,children:Object(z.jsx)(ht,{onClose:O,severity:"error",children:"Login fail"})})]})};function xt(e){return Object(z.jsx)(T.a,Object(s.a)({elevation:6,variant:"filled"},e))}var gt=function(e){var t=Object(a.useState)({name:"",username:"",password:""}),n=Object(p.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(!1),o=Object(p.a)(i,2),l=o[0],d=o[1],f=Object(u.g)(),h=function(e){c(Object(s.a)(Object(s.a)({},r),{},Object(Be.a)({},e.target.name,e.target.value)))},O=function(e,t){"clickaway"!==t&&d(!1)},x=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),g();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.post("http://localhost:5000/api/admins",r);case 3:f.push("/login"),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),d(!0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(z.jsxs)("div",{children:[Object(z.jsx)("br",{}),Object(z.jsx)("br",{}),Object(z.jsx)("br",{}),Object(z.jsx)("h1",{className:"text-center",children:"Race Manager"}),Object(z.jsxs)("div",{className:"container mt-5 custom-align",children:[Object(z.jsx)("form",{className:"align-self-center",onSubmit:x,children:Object(z.jsxs)(ee.a,{container:!0,direction:"column",justify:"center",alignItems:"center",children:[Object(z.jsx)(ee.a,{item:!0,children:Object(z.jsx)(bt.a,{label:"Name",name:"name",onChange:h})}),Object(z.jsx)(ee.a,{item:!0,children:Object(z.jsx)(bt.a,{label:"Username",name:"username",onChange:h})}),Object(z.jsx)(ee.a,{item:!0,children:Object(z.jsx)(bt.a,{id:"standard-password-input",label:"Password",name:"password",onChange:h,autoComplete:"current-password"})}),Object(z.jsx)("br",{}),Object(z.jsx)(v.a,{variant:"contained",style:{textTransform:"none"},color:"primary",type:"submit",className:"text-dark bg-warning",children:"Sign up"})]})}),Object(z.jsx)(A.a,{open:l,autoHideDuration:1500,onClose:O,children:Object(z.jsx)(xt,{onClose:O,severity:"error",children:"Sign up Failed"})})]})]})};var mt=function(e){var t=Object(a.useState)(!1),n=Object(p.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(""),o=Object(p.a)(i,2),l=o[0],d=o[1],f=Object(a.useState)({name:"",competitors:[]}),h=Object(p.a)(f,2),O=h[0],x=h[1],m=Object(a.useState)(0),v=Object(p.a)(m,2),y=v[0],S=v[1],w=Object(a.useState)(!1),k=Object(p.a)(w,2),C=k[0],N=k[1],A=Object(a.useState)("Error"),I=Object(p.a)(A,2),_=I[0],D=I[1],F=Object(a.useState)("Trackpoints uploaded"),P=Object(p.a)(F,2),R=P[0],E=P[1],U=Object(u.g)(),J=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={headers:{Authorization:"Bearer ".concat(t)}},e.next=4,L.a.post("http://localhost:5000/api/races",O,n);case 4:U.push({pathname:"/races",updateData:!0}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(t[0].name),(n=new FormData).append("file",t[0]),e.prev=3,e.next=6,L.a.post("http://localhost:5000/api/competitors/file",n,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){S(parseInt(Math.round(100*e.loaded/e.total)))}});case 6:a=e.sent,x(Object(s.a)(Object(s.a)({},O),{},{competitors:a.data.ids})),E(a.data.msg),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),500==e.t0.response.status?console.log("Problem with the server"):(D(e.t0.response.data.msg),S(0),N(!0));case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}(),H=function(e){"hideError"==e?N(!1):(d(""),S(0))},B=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.target.files.length>0&&(M(t.target.files),t.target.value=null);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(z.jsxs)("div",{children:[Object(z.jsx)("br",{}),Object(z.jsx)("div",{className:"custom-align",children:Object(z.jsx)("input",{onChange:function(e){x(Object(s.a)(Object(s.a)({},O),{},Object(Be.a)({},e.target.name,e.target.value)))},style:{outline:0},type:"text",placeholder:"Enter race name",className:"text-center  big-title  border-0 border-bottom",name:"name"})}),Object(z.jsx)("br",{}),Object(z.jsxs)("div",{children:[Object(z.jsx)("div",{className:"center2",children:"  Upload competitors file "}),Object(z.jsx)("br",{}),Object(z.jsxs)("div",{className:"center messD p-24  border-2 ".concat(r?"border-green-400 bg-green-100":"border-gray-400"),onDragEnter:function(e){c(e)}.bind(this,!0),onDragOver:function(e){e.preventDefault()},onDrop:function(e){e.preventDefault(),c(!1),M(e.dataTransfer.files),e.dataTransfer.value=null},children:[Object(z.jsxs)(Ge.a,{in:0==y,children:[Object(z.jsx)("form",{children:Object(z.jsxs)("div",{children:[Object(z.jsx)("input",{accept:".csv",style:{display:"none"},id:"file-upload",type:"file",onChange:B}),Object(z.jsx)("label",{htmlFor:"file-upload",className:"custom-file-upload",children:"Select File"})]})}),Object(z.jsx)("p",{children:"or drop .CSV here"}),Object(z.jsx)("br",{})]}),Object(z.jsx)(Ge.a,{in:C,children:Object(z.jsx)(T.a,{severity:"error",action:Object(z.jsx)(g.a,{"aria-label":"close",color:"inherit",size:"small",onClick:H.bind(this,"hideError"),children:Object(z.jsx)($e.a,{fontSize:"inherit"})}),children:_})}),Object(z.jsxs)(Ge.a,{in:0!=y,children:[Object(z.jsx)("p",{children:l}),Object(z.jsx)("br",{}),Object(z.jsx)(Ke,{value:y})]}),Object(z.jsx)(Ge.a,{in:100==y,children:Object(z.jsx)(T.a,{action:Object(z.jsx)(g.a,{"aria-label":"close",color:"inherit",size:"small",onClick:H.bind(this," "),children:Object(z.jsx)($e.a,{fontSize:"inherit"})}),children:R})})]})]}),Object(z.jsx)("br",{}),Object(z.jsx)(Ge.a,{in:100==y,children:Object(z.jsx)("div",{className:"custom-align",children:Object(z.jsx)("button",{onClick:function(){var e=window.localStorage.getItem("token");J(e)},className:"btn btn-primary",type:"submit",children:"Create Race"})})})]})};n(645);var vt=function(e){var t=e.mapRef,n=e.zoom,a=e.points;return Object(z.jsxs)(Ie.a,{ref:t,center:a.length>0?re(a[0],a[a.length-1]):{lat:"6.2441988",lng:"-75.6177781"},zoom:n,children:[Object(z.jsx)(Te.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),Object(z.jsx)(Ae.a,{position:"topleft"}),Object(z.jsx)(ze,{points:a})]})};var yt=function(e){var t=e.columns,n=e.data,a=e.deleteService,r=e.createService,c=e.updateService,i=e.onUpdateData,o=e.map;return Object(z.jsx)(X.a,{components:{Toolbar:function(e){return Object(z.jsx)("div",{variant:"dense",style:{backgroundColor:"#fcba03"},children:Object(z.jsx)(G.MTableToolbar,Object(s.a)({},e))})}},columns:t,data:n,options:{actionsColumnIndex:-1,tableLayout:"fixed",maxBodyHeight:450,showTitle:!1,search:!1,paging:!1,filtering:!0,exportButton:!0,headerStyle:{background:"#fcba03",color:"#000",textAlign:"center",fontSize:"1"},cellStyle:{textAlign:"center",fontSize:"1"}},editable:{onRowAdd:function(e){return new Promise((function(t,a){setTimeout((function(){r(e),i([].concat(Object(V.a)(n),[e])),t()}),1e3)}))},onRowUpdate:function(e,t){return new Promise((function(a,r){setTimeout((function(){c(o,e);var r=Object(V.a)(n);r[t.tableData.id]=e,i(Object(V.a)(r)),a()}),1e3)}))},onRowDelete:function(e){return new Promise((function(t,r){setTimeout((function(){a(e);var r=Object(V.a)(n),c=e.tableData.id;r.splice(c,1),i(Object(V.a)(r)),t()}),1e3)}))}},actions:[{icon:de.a,tooltip:"Show in map",onClick:function(e,t){return ce(o,t)}}]})},St="http://localhost:5000/api/waypoints/",wt=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.delete(St+t.id);case 3:console.log("Waypoint deleted"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),kt=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.put(St+t.id,zt(t));case 3:console.log("Waypoint updated"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Ct=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.post(St+t.id,zt(t));case 3:console.log("Waypoint created"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),zt=function(e){return{location:{type:e.type,coordinates:[e.latitude,e.longitude]},rule:{penalization:e.penalization,ratius:e.radius}}},Nt=[{title:"Id",field:"index",editable:"never",width:"5%"},{title:"Type",field:"type",width:"10%",lookup:{WPM:"WPM",FZ:"FZ",DZ:"DZ",START:"START",FINISH:"FINISH"},sorting:!1},{title:"Latitude",field:"latitude",type:"numeric",width:"20%",sorting:!1},{title:"Longitude",field:"longitude",type:"numeric",width:"15%",sorting:!1},{title:"Radius (m)",field:"radius",type:"numeric",width:"15%",validate:function(e){return e.radius>=0&&e.radius<=1e3||{isValid:!1,helperText:"Number must greater than zero"}}},{title:"Penalization",field:"penalization",width:"20%",validate:function(e){return!!le(e.penalization)||{isValid:!1,helperText:"Format must be hh:mm:ss"}},sorting:!0}];var At=function(){var e=Object(a.useRef)(),t=Object(a.useState)(null),n=Object(p.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)([]),o=Object(p.a)(i,2),s=o[0],l=o[1];return Object(a.useEffect)((function(){s.length>0&&localStorage.setItem("waypoints",JSON.stringify(s))}),[s]),Object(a.useEffect)((function(){!function(){var e=localStorage.getItem("waypoints");if(e)e=JSON.parse(e),l(e);else{var t=localStorage.getItem("stage");t&&(t=JSON.parse(t),l(he(t.waypoints)))}}(),c(e.current.leafletElement)}),[]),Object(z.jsxs)("div",{children:[Object(z.jsxs)(ee.a,{container:!0,justify:"center",children:[Object(z.jsx)(ee.a,{item:!0,sm:5,children:Object(z.jsx)(vt,{mapRef:e,zoom:10,points:s})}),Object(z.jsx)(ee.a,{item:!0,sm:6,children:Object(z.jsx)(yt,{columns:Nt,data:s,deleteService:wt,createService:Ct,updateService:kt,onUpdateData:function(e){return l(e)},map:r})})]}),Object(z.jsx)("br",{}),Object(z.jsx)("br",{}),Object(z.jsx)("br",{}),Object(z.jsx)("br",{})]})},It=n(436),Tt=n.n(It),_t=n(434),Dt=n.n(_t),Ft=n(435),Pt=n.n(Ft),Rt="http://localhost:5000/api/partialresults/",Et=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.delete(Rt+t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),Ut=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.put(Rt+t.id,t);case 3:console.log("Partial results updated"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();var Lt=function(e){var t=e.fetchingData,n=e.columns,a=e.data,r=e.onSetData,c=e.gpxUploaded,i=e.onSetGPXUpload,o=e.onSetItemUpdated,l=e.onSetItemDeleted;return Object(z.jsx)(X.a,{isLoading:t,components:{Toolbar:function(e){return Object(z.jsx)("div",{variant:"dense",style:{backgroundColor:"#fcba03"},children:Object(z.jsx)(G.MTableToolbar,Object(s.a)({},e))})}},columns:n,data:a,options:{actionsColumnIndex:-1,tableLayout:"fixed",maxBodyHeight:450,showTitle:!1,search:!1,paging:!1,filtering:!0,headerStyle:{background:"#fcba03",color:"#000",textAlign:"center",fontSize:"1"},cellStyle:{textAlign:"center",fontSize:"1"}},editable:{onRowUpdate:function(e,t){return new Promise((function(n,s){setTimeout((function(){c&&(e.gpx_uploaded=!0,i(!1)),Ut(e),o();var s=Object(V.a)(a);s[t.tableData.id]=e,r(Object(V.a)(s)),n()}),1e3)}))},onRowDelete:function(e){return new Promise((function(t,n){setTimeout(Object(b.a)(j.a.mark((function n(){var c,i;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Et(e.id);case 3:l(!0),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),console.log(n.t0);case 9:c=Object(V.a)(a),i=e.tableData.id,c.splice(i,1),r(Object(V.a)(c)),t();case 14:case"end":return n.stop()}}),n,null,[[0,6]])}))),1e3)}))}}})};var Jt=function(){var e=Object(a.useState)(!0),t=Object(p.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),i=Object(p.a)(c,2),o=i[0],s=i[1],l=Object(a.useState)(!1),u=Object(p.a)(l,2),d=u[0],f=u[1],h=Object(a.useState)(!1),O=Object(p.a)(h,2),x=O[0],v=O[1],y=Object(a.useState)(!1),S=Object(p.a)(y,2),w=S[0],k=S[1],C=Object(a.useState)(!1),N=Object(p.a)(C,2),A=N[0],I=N[1],T=Object(a.useState)([]),_=Object(p.a)(T,2),F=_[0],P=_[1],R=Object(a.useState)([{title:"Full Name",field:"competitor_fullname",editable:"never",width:"10%"},{title:"Category",field:"competitor_category",width:"20%",editable:"never",filtering:!1},{title:"Start Time",field:"start_time",width:"20%",filtering:!1,validate:function(e){return!!le(e.start_time)||{isValid:!1,helperText:"Format must be hh:mm:ss"}}},{title:"Arrival Time",field:"arrival_time",width:"15%",filtering:!1,validate:function(e){return!!le(e.arrival_time)||{isValid:!1,helperText:"Format must be hh:mm:ss"}}},{title:"Neutralization",field:"neutralization",filtering:!1,width:"15%",validate:function(e){return!!le(e.neutralization)||{isValid:!1,helperText:"Format must be hh:mm:ss"}}},{title:"GPX",field:"upload_gpx",cellStyle:{textAlign:"center",fontSize:"1"},filtering:!1,render:function(e){return e&&Object(z.jsx)("div",{children:e.gpx_uploaded?Object(z.jsx)("div",{children:Object(z.jsx)(m.a,{title:"Gpx uploaded",children:Object(z.jsx)(Dt.a,{fontSize:"large",style:{fill:"#00ba35"}})})}):Object(z.jsx)("div",{children:Object(z.jsx)(m.a,{title:"No gpx uploaded",children:Object(z.jsx)(Pt.a,{fontSize:"large",style:{fill:"red"}})})})})},editComponent:function(e){return e&&Object(z.jsxs)("div",{children:[Object(z.jsx)("input",{style:{display:"none"},accept:".gpx",id:"contained-button-file",multiple:!0,type:"file",onChange:function(t){return L(e.rowData.id,t)}}),Object(z.jsx)("label",{htmlFor:"contained-button-file",children:Object(z.jsx)(m.a,{title:"Upload GPX",children:Object(z.jsx)(g.a,{component:"span",children:Object(z.jsx)(Tt.a,{fontSize:"large",style:{fill:"black"}})})})})]})}}]),E=Object(p.a)(R,2),U=E[0],L=(E[1],function(){var e=Object(b.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.target.files.length>0)){e.next=14;break}return e.prev=1,f(!0),e.next=5,pe(t,n.target.files[0]);case 5:I(!0),s(!0),f(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:n.target.value=null;case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),J=function(e){var t=[];return e.forEach((function(e,n){t.push({id:e._id,competitor_fullname:e.competitor.name+" "+e.competitor.lastname,competitor_category:e.competitor.categorytype.name,start_time:e.start_time,arrival_time:e.arrival_time,neutralization:e.neutralization,gpx_uploaded:e.gpx_uploaded})})),t},M=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ot(t,n);case 3:a=e.sent,P(J(a)),r(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){var e=localStorage.getItem("stage"),t=localStorage.getItem("category");e&&t&&(e=JSON.parse(e),t=JSON.parse(t),M(e._id,t.categorytype._id))}),[]),Object(z.jsxs)("div",{children:[Object(z.jsx)("div",{className:"custom-align",children:Object(z.jsx)("div",{className:" custom-container-80",children:Object(z.jsx)(Lt,{fetchingData:n,columns:U,data:F,onSetData:function(e){return P(e)},gpxUploaded:A,onSetGPXUpload:function(e){return I(e)},onSetItemUpdated:function(){return v(!0)},onSetItemDeleted:function(){return k(!0)}})})}),Object(z.jsx)(D,{open:d,severity:"info",msg:"Uploading competitor trackpoints...",displayProgress:!0,onAlertClose:function(){return f(!1)},autoHide:!1}),Object(z.jsx)(D,{open:o,severity:"success",msg:"GPX Uploaded",displayProgress:!1,onAlertClose:function(){return s(!1)},autoHide:!0}),Object(z.jsx)(D,{open:x,severity:"success",msg:"Data Updated",displayProgress:!1,onAlertClose:function(){return v(!1)},autoHide:!0}),Object(z.jsx)(D,{open:w,severity:"success",msg:"Partial Result Deleted",displayProgress:!1,onAlertClose:function(){return k(!1)}})]})};var Mt=function(e){var t=Object(a.useState)(""),n=Object(p.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(-1),o=Object(p.a)(i,2),s=o[0],l=o[1],u=Object(a.useState)(),d=Object(p.a)(u,2),j=d[0],b=d[1],f=Object(a.useState)([{id:1,name:"Waypoints",active:!1},{id:2,name:"Add partial results",active:!1},{id:3,name:"Results",active:!1}]),h=Object(p.a)(f,2),O=h[0],x=h[1],g=Object(a.useState)({id:-1,name:"",active:!1}),m=Object(p.a)(g,2),v=m[0],y=m[1];return Object(a.useEffect)((function(){var e=window.localStorage.getItem("stage"),t=window.localStorage.getItem("category");if(e&&t){e=JSON.parse(e),t=JSON.parse(t),b(e),c(t.categorytype.name),console.log(e);var n=localStorage.getItem("option_");y(n?O[n]:O[0]),function(){var e=Object(V.a)(O),t=localStorage.getItem("option_");localStorage.removeItem("option_"),e[t||0].active=!0,x(e)}()}}),[]),Object(z.jsxs)("div",{children:[Object(z.jsx)("br",{}),Object(z.jsxs)("div",{children:[Object(z.jsx)("h1",{className:"text-center",children:j?j.name:"Stage Name"}),Object(z.jsx)("h5",{className:"text-center",children:r||"Category Name"})," "]}),Object(z.jsx)("br",{}),Object(z.jsx)("div",{className:"custom-align",children:Object(z.jsx)(ct,{options:O,handleActiveOption:function(e){return function(t){var n=Object(V.a)(O);n.forEach((function(e){e.active=!1})),s==e&&(localStorage.removeItem("option_"),localStorage.setItem("option_",e),window.location.reload()),n[e].active=!0,y(n[e]),x(n),l(e)}}})}),Object(z.jsx)("br",{}),Object(z.jsx)(Ge.a,{in:1==v.id,children:Object(z.jsx)("div",{className:"custom-align",children:Object(z.jsx)(At,{})})}),Object(z.jsx)(Ge.a,{in:2==v.id,children:Object(z.jsx)(Jt,{})}),Object(z.jsx)(Ge.a,{in:3==v.id,children:Object(z.jsx)(He,{resultsBy:"stage"})})]})},Ht=n(681),Bt=n(374),Wt=(n(646),n(437)),Vt=n.n(Wt);var Zt=function(){var e=Object(u.g)(),t=function(t,n){e.push(t)};return Object(z.jsx)(Ht.a,{style:{background:"rgba(0,0,0,0.85)",flexGrow:1},position:"static",children:Object(z.jsxs)(Bt.a,{children:[Object(z.jsx)("div",{className:"col",children:Object(z.jsx)(v.a,{onClick:t.bind(this,"/races"),color:"inherit",children:Object(z.jsx)(te.a,{variant:"h6",children:"Race Manager"})})}),Object(z.jsx)("div",{children:Object(z.jsx)(g.a,{onClick:t.bind(this,"/login"),color:"inherit",children:Object(z.jsx)(Vt.a,{children:"Logout"})})})]})})},Gt=n(687),Xt=n(684);function $t(){var e=Object(a.useState)(""),t=Object(p.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),i=Object(p.a)(c,2),o=i[0],s=i[1],l=Object(a.useState)(""),d=Object(p.a)(l,2),j=d[0],b=d[1];function f(e,t){t.preventDefault(),h.push(e)}var h=Object(u.g)();return Object(a.useEffect)((function(){}),[]),Object(a.useEffect)((function(){return h.listen((function(e){if("/race"==h.location.pathname)(t=localStorage.getItem("race"))&&r(JSON.parse(t).name);else if("/category"==h.location.pathname){var t=localStorage.getItem("race"),n=localStorage.getItem("category");t&&n&&(r(JSON.parse(t).name),s(JSON.parse(n).categorytype.name))}else if("/stage"==h.location.pathname){t=localStorage.getItem("race"),n=localStorage.getItem("category");var a=localStorage.getItem("stage");t&&n&&a&&(r(JSON.parse(t).name),s(JSON.parse(n).categorytype.name),b(JSON.parse(a).name))}}))}),[h]),Object(z.jsxs)("div",{children:["/race"==h.location.pathname&&Object(z.jsxs)(Gt.a,{"aria-label":"breadcrumb",style:{marginLeft:"10px"},children:[Object(z.jsx)(Xt.a,{color:"inherit",href:"/",onClick:f.bind(this,"/races"),children:"Races"}),Object(z.jsx)(Xt.a,{color:"textPrimary",href:"/components/breadcrumbs/",onClick:f.bind(this,"/race"),"aria-current":"page",children:n})]}),"/category"==h.location.pathname&&Object(z.jsxs)(Gt.a,{"aria-label":"breadcrumb",style:{marginLeft:"10px"},children:[Object(z.jsx)(Xt.a,{color:"inherit",href:"/",onClick:f.bind(this,"/races"),children:"Races"}),Object(z.jsx)(Xt.a,{color:"textPrimary",href:"/components/breadcrumbs/",onClick:f.bind(this,"/race"),"aria-current":"page",children:n}),Object(z.jsx)(Xt.a,{color:"textPrimary",href:"/components/breadcrumbs/",onClick:f.bind(this,"/category"),"aria-current":"page",children:o})]}),"/stage"==h.location.pathname&&Object(z.jsxs)(Gt.a,{"aria-label":"breadcrumb",style:{marginLeft:"10px"},children:[Object(z.jsx)(Xt.a,{color:"inherit",href:"/",onClick:f.bind(this,"/races"),children:"Races"}),Object(z.jsx)(Xt.a,{color:"textPrimary",href:"/components/breadcrumbs/",onClick:f.bind(this,"/race"),"aria-current":"page",children:n}),Object(z.jsx)(Xt.a,{color:"textPrimary",href:"/components/breadcrumbs/",onClick:f.bind(this,"/category"),"aria-current":"page",children:o}),Object(z.jsx)(Xt.a,{color:"textPrimary",href:"/components/breadcrumbs/",onClick:f.bind(this,"/stage"),"aria-current":"page",children:j})]})]})}var qt=function(){return Object(z.jsx)("div",{children:Object(z.jsxs)(l.a,{children:[Object(z.jsx)(Zt,{}),Object(z.jsxs)(u.d,{children:[Object(z.jsx)(u.a,{exact:!0,path:"/",to:"/login"}),Object(z.jsx)(u.b,{path:"/races",render:function(e){return Object(z.jsxs)("div",{children:[Object(z.jsx)("br",{}),Object(z.jsx)($t,Object(s.a)({},e)),Object(z.jsx)(W,Object(s.a)({},e))]})}}),Object(z.jsx)(u.b,{path:"/race",render:function(e){return Object(z.jsxs)("div",{children:[Object(z.jsx)("br",{}),Object(z.jsx)($t,Object(s.a)({},e)),Object(z.jsx)(rt,Object(s.a)({},e))]})}}),Object(z.jsx)(u.b,{path:"/category",render:function(e){return Object(z.jsxs)("div",{children:[Object(z.jsx)("br",{}),Object(z.jsx)($t,Object(s.a)({},e)),Object(z.jsx)(jt,Object(s.a)({},e))]})}}),Object(z.jsx)(u.b,{path:"/login",render:function(e){return Object(z.jsx)(Ot,Object(s.a)({},e))}}),Object(z.jsx)(u.b,{path:"/signup",render:function(e){return Object(z.jsx)(gt,Object(s.a)({},e))}}),Object(z.jsx)(u.b,{path:"/createrace",render:function(e){return Object(z.jsx)(mt,{})}}),Object(z.jsx)(u.b,{path:"/stage",render:function(e){return Object(z.jsxs)("div",{children:[Object(z.jsx)("br",{}),Object(z.jsx)($t,Object(s.a)({},e)),Object(z.jsx)(Mt,Object(s.a)({},e))]})}}),Object(z.jsx)(u.b,{children:Object(z.jsx)(u.a,{to:"/login"})})]})]})})};n(647);i.a.render(Object(z.jsx)(qt,{}),document.getElementById("root")),o()}},[[648,1,2]]]);
//# sourceMappingURL=main.4c78d53b.chunk.js.map